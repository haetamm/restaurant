<div *ngIf="isTokenChecked">
  <div *ngIf="token; else notFound">
    <form
      [formGroup]="resetPasswordForm"
      (ngSubmit)="onSubmit()"
      novalidate
      class="forgot-password"
    >
      <ng-container *ngFor="let field of resetPasswordFields; let i = index">
        <input
          [type]="field.type"
          [formControlName]="field.name"
          [placeholder]="field.label"
        />
        <div
          *ngIf="
            resetPasswordForm.controls[field.name].touched &&
            resetPasswordForm.controls[field.name].invalid
          "
          class="text-red-500 text-sm mt-1"
        >
          {{ resetPasswordForm.controls[field.name].getError("zod") }}
        </div>
      </ng-container>

      <button
        [disabled]="(state$ | async)?.loading || resetPasswordForm.invalid"
      >
        {{ (state$ | async)?.loading ? "Loading..." : "Send Request" }}
      </button>
    </form>

    <a href="https://codepen.io/davinci/" target="_blank"
      >check my other pens</a
    >
  </div>

  <ng-template #notFound>
    <app-notfound-page></app-notfound-page>
  </ng-template>
</div>
