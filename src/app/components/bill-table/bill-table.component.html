<!-- Loading Indicator -->
<div
  *ngIf="loading"
  class="lg:hidden flex justify-center items-center py-4 p-2 lg:p-3"
>
  <div
    class="w-8 h-8 border-4 border-t-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"
  ></div>
</div>

<!-- Desktop Table (hidden lg:block) -->
<div class="hidden lg:block px-3">
  <table
    class="w-full min-w-full text-sm shadow-sm text-left rtl:text-right text-gray-500 dark:text-gray-400 table-fixed box-border"
  >
    <thead
      class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"
    >
      <tr class="w-full">
        <ng-container *ngFor="let coloumn of coloumns">
          <th scope="col" class="px-6 py-3 box-border">
            {{ coloumn.name }}
          </th>
        </ng-container>
      </tr>
    </thead>
    <tbody>
      <!-- Loading Placeholder -->
      <ng-container *ngIf="loading">
        <tr
          *ngFor="let i of [1, 2, 3]"
          class="w-full bg-white border-b dark:bg-gray-800 dark:border-gray-700 border-gray-200"
        >
          <td *ngFor="let j of [1, 2, 3, 4, 5]" class="px-6 py-4">
            <div
              class="h-4 bg-gray-200 dark:bg-gray-600 rounded animate-pulse"
            ></div>
          </td>
        </tr>
      </ng-container>

      <!-- Data Not Available -->
      <tr
        *ngIf="!loading && bills.length === 0"
        class="w-full bg-white border-b dark:bg-gray-800 dark:border-gray-700 border-gray-200"
      >
        <td
          colspan="5"
          class="px-6 py-4 text-center text-gray-500 dark:text-gray-400"
        >
          Data not available
        </td>
      </tr>

      <!-- Data Rows -->
      <ng-container *ngIf="!loading && bills.length > 0">
        <tr
          *ngFor="let bill of bills"
          class="w-full bg-white border-b dark:bg-gray-800 dark:border-gray-700 border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600"
        >
          <td class="px-6 py-4 box-border font-medium text-gray-900 truncate">
            {{ bill.customerName }}
          </td>
          <td class="px-6 py-4 box-border truncate">
            {{ formatDate(bill.transDate) }}
          </td>
          <td class="px-6 py-4 box-border truncate">
            Rp. {{ bill.totalPayment }}
          </td>
          <td class="px-6 py-4 box-border truncate">
            {{ bill.payment.transactionStatus }}
          </td>
          <td class="px-1 xl:px-6 py-4 box-border truncate flex space-x-4">
            <a
              href="#"
              class="font-medium text-blue-600 dark:text-blue-500 hover:underline"
              >Detail</a
            >
            <a
              href="#"
              class="font-medium text-blue-600 dark:text-blue-500 hover:underline"
              >Bayar</a
            >
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>

<!-- Mobile Table (lg:hidden) -->
<div class="lg:hidden text-sm px-3" *ngIf="!loading">
  <div
    *ngFor="let bill of bills"
    class="bg-white border-b border-gray-200 dark:border-gray-700 p-4 mb-2 rounded-sm shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600"
  >
    <div class="flex flex-col space-y-2 text-sm">
      <div class="flex justify-between">
        <span class="text-gray-700">{{ formatDate(bill.transDate) }}</span>
        <span class="text-gray-700">{{ bill.payment.transactionStatus }}</span>
      </div>
      <div class="flex flex-col">
        <span class="font-medium text-gray-900">Pelanggan</span>
        <span class="text-gray-700 truncate">{{ bill.customerName }}</span>
      </div>

      <div class="flex justify-between items-end">
        <div class="flex flex-col">
          <span class="font-medium text-gray-900">Total Bayar</span>
          <div class="flex space-x-6">
            <span class="text-gray-700 font-semibold"
              >Rp. {{ bill.totalPayment }}</span
            >
            <a
              href="#"
              class="font-medium text-blue-600 dark:text-blue-500 hover:underline"
              >Bayar</a
            >
          </div>
        </div>
        <a
          href="#"
          class="font-medium text-blue-600 dark:text-blue-500 hover:underline"
          >Detail</a
        >
      </div>
    </div>
  </div>
</div>
